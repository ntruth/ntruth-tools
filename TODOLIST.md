# OmniBox 开发任务清单

> 最后更新：2025年12月

## 开发阶段总览

| 阶段 | 版本 | 状态 | 预计完成 |
|------|------|------|----------|
| Phase 1: MVP | v0.1 | ✅ 已完成 | - |
| Phase 2: 核心功能 | v0.5 | ✅ 已完成 | - |
| Phase 3: 高级功能 | v0.8 | 🚧 进行中 | - |
| Phase 4: 扩展能力 | v1.0 | ⏳ 待开始 | - |

---

## Phase 1: MVP (v0.1) ✅

### 项目初始化
- [x] 创建产品需求文档
- [x] 创建技术架构设计文档
- [x] 初始化 Tauri 2.0 项目
- [x] 配置 SolidJS + TypeScript + Vite
- [x] 配置 TailwindCSS
- [x] 设置项目目录结构
- [x] 配置 ESLint + Prettier
- [x] 配置 Rust 代码格式化工具

### 基础架构
- [x] 实现 AppState 全局状态管理
- [x] 实现 ConfigManager 配置管理
- [x] 设置 SQLite 数据库连接
- [x] 实现基础日志系统
- [x] 实现错误处理机制

### 主窗口 UI
- [x] 实现无边框透明窗口
- [x] 实现搜索输入框组件
- [x] 实现结果列表组件
- [x] 实现结果项组件
- [x] 实现键盘导航
- [x] 实现窗口显示/隐藏逻辑
- [x] 实现全局快捷键注册

### 基础文件搜索
- [x] 实现文件扫描器
- [x] 实现前缀树索引
- [x] 实现基础模糊匹配
- [x] 实现搜索结果排序

### 应用搜索与启动
- [x] macOS: 获取已安装应用列表
- [x] Windows: 获取已安装应用列表
- [x] 实现应用图标缓存
- [x] 实现应用启动功能（open_path）

### 计算器
- [x] 实现数学表达式解析
- [x] 支持基础运算（+、-、*、/、%）
- [x] 支持数学函数（sin、cos、sqrt 等）
- [x] 支持单位换算

---

## Phase 2: 核心功能 (v0.5) ✅

### 文件索引引擎
- [x] 实现 Trigram 索引（支持序列化）
- [x] 实现文件系统监听（debounce 支持）
- [x] 实现增量索引更新（FileWatcher 集成）
- [x] 实现搜索过滤器（扩展名、路径、大小、时间）
- [x] 实现智能排序（频率、时间、匹配度）

### 剪贴板管理
- [x] 实现独立剪贴板窗口
- [x] 实现剪贴板监听
- [x] 实现多类型支持（文本、图片、文件）
- [x] 实现历史存储（SQLite 完整架构）
- [x] 实现智能预览（在 types 中）
- [x] 实现快速粘贴（⌘1-9 快捷键）
- [x] 实现收藏功能（存储支持）
- [x] 实现来源追踪（存储支持）
- [x] 实现敏感内容过滤（正则匹配）
- [x] 实现应用过滤（exclude_apps 支持）

### Web 搜索
- [x] 实现 URL 自动识别
- [x] 实现关键词触发搜索
- [x] 内置搜索引擎（Google、Baidu、GitHub 等 8 个）
- [x] 实现自定义搜索引擎（配置结构支持）

### 配置中心
- [x] 实现配置中心窗口布局
- [x] 实现 General 设置页
- [x] 实现 Features 设置页
- [x] 实现 Appearance 设置页
- [x] 实现 Shortcuts 设置页
- [x] 实现 Clipboard 设置页
- [x] 实现 Indexer 设置页
- [x] 实现 WebSearch 设置页
- [x] 实现配置持久化
- [x] 实现配置导入/导出
- [x] 实现配置重置

---

## Phase 3: 高级功能 (v0.8) 🚧

### 截图功能
- [ ] 实现截图覆盖层窗口
- [ ] 实现区域选择
- [ ] 实现窗口检测与选择
- [ ] 实现全屏截图
- [ ] 实现延时截图

### 标注编辑器
- [ ] 实现标注编辑器窗口
- [ ] 实现选择工具
- [ ] 实现矩形工具
- [ ] 实现椭圆工具
- [ ] 实现箭头工具
- [ ] 实现直线工具
- [ ] 实现画笔工具
- [ ] 实现文字工具
- [ ] 实现马赛克工具
- [ ] 实现序号工具
- [ ] 实现撤销/重做

### 贴图功能
- [ ] 实现贴图窗口
- [ ] 实现透明度调节
- [ ] 实现缩放功能
- [ ] 实现鼠标穿透
- [ ] 支持多贴图窗口

### 取色器
- [ ] 实现屏幕取色
- [ ] 实现颜色格式转换（HEX、RGB、HSL）
- [ ] 实现颜色历史

### AI 集成 ✅
- [x] 实现 AI 对话窗口（全功能 Chat UI）
- [x] 实现 OpenAI 客户端（支持 GPT-4、GPT-3.5 等）
- [x] 实现 Anthropic 客户端（支持 Claude 3.5/3）
- [x] 实现 Ollama 客户端（支持本地 LLM）
- [x] 实现流式响应（SSE + tokio channels）
- [x] 实现对话历史（SQLite 存储）
- [x] 实现预设 Prompt 管理（创建/删除/选择）
- [x] 实现截图提问（图片附件支持）
- [x] 实现选中文本提问（文本附件支持）

### 完整配置中心 ✅
- [x] 实现 Clipboard 设置页
- [x] 实现 Screenshot 设置页
- [x] 实现 AI 设置页（Provider/Model/Temperature/MaxTokens）
- [x] 实现 Web Search 设置页
- [x] 实现 Advanced 设置页（数据管理/调试模式）
- [x] 实现 About 页面（版本信息/链接/致谢）
- [x] 实现配置导入/导出

---

## Phase 4: 扩展能力 (v1.0)

### 工作流系统
- [ ] 实现工作流引擎
- [ ] 实现可视化节点编辑器
- [ ] 实现输入节点
- [ ] 实现逻辑节点（条件、循环、延迟）
- [ ] 实现转换节点（JSON、正则、模板）
- [ ] 实现动作节点（URL、文件、Shell、HTTP）
- [ ] 实现 AI 节点
- [ ] 实现脚本节点（JavaScript）
- [ ] 实现触发器（关键词、快捷键、定时等）
- [ ] 实现工作流导入/导出

### 插件系统
- [ ] 设计插件 API
- [ ] 实现插件加载器
- [ ] 实现插件沙箱
- [ ] 实现权限控制
- [ ] 实现 SearchProvider 插件类型
- [ ] 实现 ActionHandler 插件类型
- [ ] 实现 WorkflowNode 插件类型

### 插件市场
- [ ] 实现插件市场 UI
- [ ] 实现插件安装/卸载
- [ ] 实现插件更新检查
- [ ] 实现插件搜索

### 其他
- [ ] 实现数据同步（可选）
- [ ] 实现自动更新
- [ ] 完善多语言支持
- [ ] 性能优化
- [ ] 编写用户文档

---

## 持续任务

### 测试
- [ ] 单元测试覆盖
- [ ] 集成测试
- [ ] E2E 测试

### CI/CD
- [ ] 配置 GitHub Actions CI
- [ ] 配置自动构建
- [ ] 配置自动发布

### 文档
- [ ] 完善 README
- [ ] 编写开发者文档
- [ ] 编写插件开发指南

---

## 图例

- ✅ 已完成
- 🚧 进行中
- ⏳ 待开始
- ❌ 已取消
